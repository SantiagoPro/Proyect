<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../WEB-INF/template/administrador.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
    <ui:define name="link">
        <link rel="stylesheet" href="#{request.contextPath}/resources/css/jquery.dataTables.css"/>
        <link rel="stylesheet" href="#{request.contextPath}/resources/css/dataTables.bootstrap4.css"/>
        <link rel="stylesheet" href="#{request.contextPath}/resources/fonts/Brands/style.css"/>
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/css/ihover.css"/>
    </ui:define>
    <ui:define name="script">
        <script src="#{request.contextPath}/resources/js/jquery.dataTables.js"></script>
        <script src="#{request.contextPath}/resources/js/bootstrap.dataTables.js"></script>
        <script src="#{request.contextPath}/resources/js/tabla.js"></script>
        <script src="#{request.contextPath}/resources/js/formValidation.min.js"></script>
    </ui:define>
    <ui:define name="title">
        #{msjAdmin.perfil}
    </ui:define>
    <ui:define name="pag">
        #{msjAdmin.perfil}
    </ui:define>
    <ui:define name="Contenido">
        <!-- Modal para actualizar -->
        <div id="modalFoto" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <h:form a:data-parsley-validate="true" class="form-horizontal form-control-success"
                        prependId="false" enctype="multipart/form-data" >
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4>
                                Cambiar foto
                            </h4>
                        </div>
                        <div class="modal-body">
                            <h:form>
                                <h:inputFile value="#{fileUpload.archivo}" class="btn btn-info alert-light" />
                                <h:

                            </h:form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger alert-light" data-dismiss="modal">#{msjAdmin.cancelar}</button>
                            <h:commandButton value="Editar" action="#{usuarioController.cambiarFoto()}"
                                             class="btn btn-warning alert-light"/>
                        </div>
                    </div>
                </h:form>
            </div>
        </div>
        <!-- Modal para Editar -->
        <div id="modalEditar" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <h:form id="demo-form2" a:data-parsley-validate="true" class="form-horizontal form-control-success"
                        prependId="false">
                    <h:panelGroup id="contentModalEditar" layout="block">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">#{msjAdmin.editarTitle}</h5>
                            </div>
                            <div class="modal-body">
                                <label class="control-label col-md-12 col-md-12 col-xs-12" for="tipoDoc"> #{msjAdmin.tipoDoc} <span class="required" >*</span> </label>
                                <div class="col-md-10 col-sm-8 col-xs-12">
                                    <h:selectOneMenu id="tipoDoc" value="#{sessionCotroller.user.idTipoDocumento}"
                                                     class="form-control col-md-7 col-xs-12" required="true" >
                                        <f:selectItems value="#{documentoController.tiposDocumentos}" var="td" itemLabel="#{td.nombre}"></f:selectItems>
                                    </h:selectOneMenu>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-12 col-sm-12 col-xs-12" for="documento"> #{msjAdmin.documento} <span class="required">*</span>
                                    </label>
                                    <div class="col-md-12 col-md-12 col-xs-12">
                                        <h:inputText a:type="number" id="documento" minlength="10" 
                                                     maxlength="13" value="#{sessionController.user.idUsuarios}"
                                                     class="form-control col-md-7 col-xs-12" autocomplete="off" required="true"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-12 col-md-12 col-xs-12" for="nombres">#{msjAdmin.nombre} <span class="required">*</span>
                                    </label>
                                    <div class="col-md-12 col-md-12 col-xs-12">
                                        <h:inputText id="nombres" value="#{sessionController.user.nombre}"
                                                     class="form-control col-md-7 col-xs-12" autocomplete="off" required="true" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-12 col-md-12 col-xs-12" for="apellidos"> #{msjAdmin.apellido} <span class="required">*</span>
                                    </label>
                                    <div class="col-md-12 col-md-12 col-xs-12">
                                        <h:inputText id="apellidoa" value="#{sessionController.user.apellido}"
                                                     class="form-control col-md-7 col-xs-12" autocomplete="off" required="true" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-10 col-sm-10 col-xs-12" for="genero"> #{msjAdmin.genero} <span class="required">*</span>
                                    </label>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <h:selectOneMenu id="genero" value="#{sessionController.user.sexo}"
                                                         class="form-control col-md-7 col-xs-12" required="true" >
                                            <f:selectItem itemLabel="Seleccione el gÃ©nero"/>
                                            <f:selectItem itemValue="false" itemLabel="Femenino"/>
                                            <f:selectItem itemValue="true" itemLabel="Masculino"/>
                                        </h:selectOneMenu>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-10 col-sm-10 col-xs-12" for="rh"> #{msjAdmin.rh} <span class="required">*</span>
                                    </label>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <h:selectOneRadio id="rh" value="#{sessionController.user.rh}" layout="pageDirection"
                                                          class="form-control col-md-7 col-xs-12" required="true" >
                                            <f:selectItem itemValue="O-" itemLabel="O-"/>
                                            <f:selectItem itemValue="O+" itemLabel="O+"/>
                                            <f:selectItem itemValue="A-" itemLabel="A-"/>
                                            <f:selectItem itemValue="A+" itemLabel="A+"/>
                                            <f:selectItem itemValue="AB-" itemLabel="AB-"/>
                                            <f:selectItem itemValue="AB+" itemLabel="AB+"/>
                                        </h:selectOneRadio>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-12 col-md-12 col-xs-12" for="seguro"> #{msjAdmin.seguro} <span class="required">*</span>
                                    </label>
                                    <div class="col-md-12 col-md-12 col-xs-12">
                                        <h:inputText id="seguro" value="#{sessionController.user.seguroMedico}"
                                                     class="form-control col-md-7 col-xs-12" autocomplete="off" required="true" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-12 col-md-12 col-xs-12" for="correo"> #{msjAdmin.correo} <span class="required">*</span>
                                    </label> 
                                    <div class="col-md-12 col-md-12 col-xs-12">
                                        <h:inputText id="correo" a:type="email" value="#{sessionController.user.mail}"
                                                     class="form-control col-md-7 col-xs-12" autocomplete="off" required="true" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-12 col-md-12 col-xs-12" for="telefono"> #{msjAdmin.telefono} <span class="required">*</span>
                                    </label>
                                    <div class="col-md-12 col-md-12 col-xs-12">
                                        <h:inputText id="telefono" value="#{sessionController.user.telefono}"
                                                     class="form-control col-md-7 col-xs-12" autocomplete="off" required="true" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-12 col-md-12 col-xs-12" for="direccion"> #{msjAdmin.direccion} <span class="required">*</span>
                                    </label>
                                    <div class="col-md-12 col-md-12 col-xs-12">
                                        <h:inputText id="direccion" value="#{sessionController.user.direccion}"
                                                     class="form-control col-md-7 col-xs-12" autocomplete="off" a:required="true" />
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger alert-light" data-dismiss="modal">#{msjAdmin.cancelar}</button>
                                    <h:commandButton actionListener="#{usuarioController.editarUser()}" 
                                                     class="btn btn-success alert-light" value="#{msjAdmin.btnEdit}"/>
                                </div>
                            </div>
                        </div>
                    </h:panelGroup>
                </h:form>
            </div>
        </div>

        <!-- Datos Usuario -->
        <h:form prependId="false">
            <div class="row d-flex flex-row justify-content-center 
                 align-items-center align-content-center align-self-center">
                <div class="row">
                    <div class="ih-item square effect11 top_to_bottom colored" style="height: 500px;width: 400px;">
                        <a href="#">
                            <div class="img">
                                <img src="#{request.contextPath}/resources/images/perfiles/#{sessionController.user.foto}.png" alt="img"/>
                            </div>
                            <div class="info">
                                <div class="info-back">
                                    <h3>#{msjLogin.informacionPersonal}</h3>
                                    <ul class="list-group list-group-flush">
                                        <h:outputText class="list-group-item" id="Documento" value="#{sessionController.user.idUsuarios}"/>
                                        <h:outputText class="list-group-item" id="Sexo" value="#{sessionController.user.sexo}"/>
                                        <h:outputText class="list-group-item" id="FechaNacimiento" converter="fechaConverter" value="#{sessionController.user.fechaNacimiento}"/>
                                        <h:outputText class="list-group-item" id="Seguro" value="#{sessionController.user.seguroMedico}"/>
                                        <h:outputText class="list-group-item" id="Rh" value="#{sessionController.user.rh}"/>
                                        <h:outputText class="list-group-item" id="Correo" value="#{sessionController.user.mail}"/>
                                        <h:outputText class="list-group-item" id="Telefono" value="#{sessionController.user.telefono}"/>
                                        <h:outputText class="list-group-item" id="Direccion" value="#{sessionController.user.direccion}"/>
                                    </ul>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-2">
                        <h:commandLink class="btn btn-warning alert-secondary" style="margin: 1px"
                                       actionListener="#{usuarioController.seleccionarUsuario(u)}" 
                                       a:data-toggle="modal" a:data-target="#modalEditar">
                            <f:ajax render=":contentModalEditar"/>
                            <i class="fa fa-pencil"></i>
                        </h:commandLink>
                        <h:commandLink class="btn btn-info alert-secondary" style="margin: 1px"
                                       actionListener="#{usuarioController.seleccionarUsuario(u)}" 
                                       a:data-toggle="modal" a:data-target="#modalFoto">
                            <f:ajax render=":contentModalEditar"/>
                            <i class="fa fa-camera-retro"></i>
                        </h:commandLink>
                    </div>
                </div>

            </div>
        </h:form>
    </ui:define>
</ui:composition>
